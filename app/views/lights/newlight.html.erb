<% content_for :head do %>

    <title>Senior Lab</title>
      <script language="JavaScript1.2" src="/main.js" type="text/javascript"></script> 
      <script type="text/javascript" src="/jquery.js"></script>
      <script type="text/javascript" src="/jquery-ui.min.js"></script>
      <script type="text/javascript" src="/prototype.js"></script>
      <link rel="stylesheet" type="text/css" href="/speechbubbles.css" />
      <script src="/speechbubbles.js">

/***********************************************
* Speech Bubbles Tooltip- (c) Dynamic Drive (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit http://www.dynamicdrive.com/ for this script and 100s more.
***********************************************/

</script>
<script type="text/javascript">function updatelights(){ 

  // Alert the position with jQuery
  var position = jQuery("#icon").position();
     document.getElementById("light_x_position").value = position.left;
     document.getElementById("light_y_position").value = position.top;
     document.getElementById("icon").title = "X position (m): "+PXtoM(position.left)+" </br> Y position (m): "+PXtoM(position.top)+"";
	jQuery('#icon').speechbubble('');
     
    
}; </script>

<script type="text/javascript">function initialize(){ 
        var  mapheight = jQuery("#map").height();
        var  mapwidth  = jQuery("#map").width();

         document.getElementById("icon").style.top = 100 +"px";
         document.getElementById("icon").style.left = 100 +"px";
         
         
  // Alert the position with jQuery
        var position = jQuery("#icon").position();
     document.getElementById("light_x_position").value = position.left;
     document.getElementById("light_y_position").value = position.top;
     document.getElementById("icon").title = "X position (m): "+PXtoM(position.left)+" </br> Y position (m): "+PXtoM(position.top)+"";
	jQuery('#icon').speechbubble('');
        
}; </script>


<script type="text/javascript">

jQuery(function(jQuery){ //on document.ready
 	//Apply tooltip to links with class="addspeech", plus look inside 'speechdata.txt' for the tooltip markups
	jQuery('#icon').speechbubble('');
})

</script>
      <script type="text/javascript">
      

jQuery( init );

function init() {
  jQuery('#icon').draggable();
}

jQuery.noConflict();

</script>
<% end %>

  <div class="field">
    <b>Drag and drop light to desired position.</b><br />

  </div>
<div id = "map" style="position:relative; z-index:0;">
<img src="<%= @location.photo.url(:original) %>" onmouseover="updatelights()" alt="Indoor Map"/>
<div id = "icon"   style="position:absolute; z-index:4"><img src="/images/light.png" alt="Senior Lab"/></div>

</div>



<script language="JavaScript1.2" src="style.js" type="text/javascript"></script>  
 <script type="text/javascript"></script>

<div style="position:relative"> <%= render 'newlightform' %> </div>
</body>
